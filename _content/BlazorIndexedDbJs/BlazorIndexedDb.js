(()=>{"use strict";var t={29:(t,e,n)=>{let o,r;n.r(e),n.d(e,{deleteDB:()=>v,openDB:()=>f,unwrap:()=>u,wrap:()=>y});const i=new WeakMap,s=new WeakMap,a=new WeakMap,d=new WeakMap,c=new WeakMap;let h={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return s.get(t);if("objectStoreNames"===e)return t.objectStoreNames||a.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function l(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(u(this),t),y(i.get(this))}:function(...t){return y(e.apply(u(this),t))}:function(t,...n){const o=e.call(u(this),t,...n);return a.set(o,t.sort?t.sort():[t]),y(o)}:(t instanceof IDBTransaction&&function(t){if(s.has(t))return;const e=new Promise(((e,n)=>{const o=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",i),t.removeEventListener("abort",i)},r=()=>{e(),o()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",r),t.addEventListener("error",i),t.addEventListener("abort",i)}));s.set(t,e)}(t),n=t,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,h):t);var e,n}function y(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const o=()=>{t.removeEventListener("success",r),t.removeEventListener("error",i)},r=()=>{e(y(t.result)),o()},i=()=>{n(t.error),o()};t.addEventListener("success",r),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&i.set(e,t)})).catch((()=>{})),c.set(e,t),e}(t);if(d.has(t))return d.get(t);const e=l(t);return e!==t&&(d.set(t,e),c.set(e,t)),e}const u=t=>c.get(t);function f(t,e,{blocked:n,upgrade:o,blocking:r,terminated:i}={}){const s=indexedDB.open(t,e),a=y(s);return o&&s.addEventListener("upgradeneeded",(t=>{o(y(s.result),t.oldVersion,t.newVersion,y(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((t=>{i&&t.addEventListener("close",(()=>i())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}function v(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(()=>e())),y(n).then((()=>{}))}const g=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],I=new Map;function w(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(I.get(e))return I.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=b.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!r&&!g.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,r?"readwrite":"readonly");let s=i.store;o&&(s=s.index(e.shift()));const a=await s[n](...e);return r&&await i.done,a};return I.set(e,i),i}var S;S=h,h={...S,get:(t,e,n)=>w(t,e)||S.get(t,e,n),has:(t,e)=>!!w(t,e)||S.has(t,e)}},282:(t,e,n)=>{const o=n(538);var r;!function(t){const e={IDBManager:new o.IndexedDbManager};t.initialise=function(){"undefined"==typeof window||window.BlazorIndexedDbJs?window.BlazorIndexedDbJs=Object.assign(Object.assign({},window.BlazorIndexedDbJs),e):window.BlazorIndexedDbJs=Object.assign({},e)}}(r||(r={})),r.initialise()},538:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{d(o.next(t))}catch(t){i(t)}}function a(t){try{d(o.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}d((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.IndexedDbManager=void 0;const r=n(29),i="Database is closed";class s{constructor(){this.dbInstance=void 0,this.open=t=>o(this,void 0,void 0,(function*(){var e="";try{(!this.dbInstance||this.dbInstance.version<t.version)&&(this.dbInstance&&(this.dbInstance.close(),this.dbInstance=void 0),this.dbInstance=yield r.openDB(t.name,t.version,{upgrade(n,o,r,i){try{s.upgradeDatabase(n,o,r,t)}catch(t){throw e=t.toString(),t}}}))}catch(t){throw t.toString()+" "+e}})),this.deleteDatabase=t=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;this.dbInstance.close(),yield r.deleteDB(t),this.dbInstance=void 0}catch(e){throw`Database ${t}, ${e.toString()}`}})),this.getDbSchema=t=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const t=this.dbInstance,e={name:t.name,version:t.version,objectStores:[]};for(let n=0;n<t.objectStoreNames.length;n++){let o=t.transaction(t.objectStoreNames[n],"readonly").store,r={name:o.name,keyPath:Array.isArray(o.keyPath)?o.keyPath.join(","):o.keyPath,autoIncrement:o.autoIncrement,indexes:[]};for(let t=0;t<o.indexNames.length;t++){const e=o.index(o.indexNames[t]);let n={name:e.name,keyPath:Array.isArray(e.keyPath)?e.keyPath.join(","):e.keyPath,multiEntry:e.multiEntry,unique:e.unique};r.indexes.push(n)}e.objectStores.push(r)}return e}catch(e){throw`Database ${t}, ${e.toString()}`}})),this.count=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readonly");let o=yield n.store.count(null!=e?e:void 0);return yield n.done,o}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.countByKeyRange=(t,e,n,r,i)=>o(this,void 0,void 0,(function*(){try{return yield this.count(t,IDBKeyRange.bound(e,n,r,i))}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.get=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readonly");let o=yield n.store.get(e);return yield n.done,o}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAll=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly");let r=yield o.store.getAll(null!=e?e:void 0,null!=n?n:void 0);return yield o.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAllByKeyRange=(t,e,n,r,s,a)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;return yield this.getAll(t,IDBKeyRange.bound(e,n,r,s),a)}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAllByArrayKey=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readonly");let o=[];for(let t=0;t<e.length;t++){const r=e[t];o=o.concat(yield n.store.getAll(r))}return yield n.done,o}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getKey=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readonly");let o=yield n.store.getKey(e);return yield n.done,o}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAllKeys=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly");let r=yield o.store.getAllKeys(null!=e?e:void 0,null!=n?n:void 0);return yield o.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAllKeysByKeyRange=(t,e,n,r,s,a)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;return yield this.getAllKeys(t,IDBKeyRange.bound(e,n,r,s),a)}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.getAllKeysByArrayKey=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readonly");let o=[];for(let t=0;t<e.length;t++){const r=e[t];o=o.concat(yield n.store.getAllKeys(r))}return yield n.done,o}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.query=(t,e,n,r=0,s=0)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;try{var o=new Function("obj",n)}catch(t){throw`${t.toString()} in filter { ${n} }`}var a=0,d="";let h=[];const l=this.dbInstance.transaction(t,"readonly");let y=yield l.store.openCursor(null!=e?e:void 0);for(;y;){if(!y)return;try{var c=o(y.value);c&&++a>s&&h.push(c)}catch(t){return void(d=`obj: ${JSON.stringify(y.value)}\nfilter: ${n}\nerror: ${t.toString()}`)}if(r>0&&h.length>=r)return;y=yield y.continue()}if(yield l.done,d)throw d;return h}catch(e){throw`Store ${t} ${e.toString()}`}})),this.countFromIndex=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly");let r=yield o.store.index(e).count(null!=n?n:void 0);return yield o.done,r}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.countFromIndexByKeyRange=(t,e,n,r,i,s)=>o(this,void 0,void 0,(function*(){try{return yield this.countFromIndex(t,e,IDBKeyRange.bound(n,r,i,s))}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getFromIndex=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),r=yield o.store.index(e).get(n);return yield o.done,r}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllFromIndex=(t,e,n,r)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),s=yield o.store.index(e).getAll(null!=n?n:void 0,null!=r?r:void 0);return yield o.done,s}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllFromIndexByKeyRange=(t,e,n,r,s,a,d)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;return yield this.getAllFromIndex(t,e,IDBKeyRange.bound(n,r,s,a),d)}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllFromIndexByArrayKey=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),r=o.store.index(e);let s=[];for(let t=0;t<n.length;t++){const e=n[t];s=s.concat(yield r.getAll(e))}return yield o.done,s}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getKeyFromIndex=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),r=yield o.store.index(e).getKey(n);return yield o.done,r}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllKeysFromIndex=(t,e,n,r)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),s=yield o.store.index(e).getAllKeys(null!=n?n:void 0,null!=r?r:void 0);return yield o.done,s}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllKeysFromIndexByKeyRange=(t,e,n,r,s,a,d)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;return yield this.getAllKeysFromIndex(t,e,IDBKeyRange.bound(n,r,s,a),d)}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.getAllKeysFromIndexByArrayKey=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readonly"),r=o.store.index(e);let s=[];for(let t=0;t<n.length;t++){const e=n[t];s=s.concat(yield r.getAllKeys(e))}return yield o.done,s}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.queryFromIndex=(t,e,n,r,s=0,a=0)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;try{var o=new Function("obj",r)}catch(t){throw`${t.toString()} in filter { ${r} }`}var d=0,c="";let l=[];const y=this.dbInstance.transaction(t,"readonly");let u=yield y.store.index(e).openCursor(null!=n?n:void 0);for(;u;){if(!u)return;try{var h=o(u.value);h&&++d>a&&l.push(h)}catch(t){return void(c=`obj: ${JSON.stringify(u.value)}\nfilter: ${r}\nerror: ${t.toString()}`)}if(s>0&&l.length>=s)return;u=yield u.continue()}if(yield y.done,c)throw c;return l}catch(n){throw`Store ${t}, Index ${e}, ${n.toString()}`}})),this.add=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readwrite");e=this.checkForKeyPath(o.store,e);const r=yield o.store.add(e,null!=n?n:void 0);return yield o.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.put=(t,e,n)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const o=this.dbInstance.transaction(t,"readwrite"),r=yield o.store.put(e,null!=n?n:void 0);return yield o.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.delete=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readwrite");yield n.store.delete(e),yield n.done}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.batchAdd=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readwrite");let r=[];return e.forEach((t=>o(this,void 0,void 0,(function*(){let e=this.checkForKeyPath(n.store,t);r.push(yield n.store.add(e))})))),yield n.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.batchPut=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readwrite");let r=[];return e.forEach((t=>o(this,void 0,void 0,(function*(){r.push(yield n.store.put(t))})))),yield n.done,r}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.batchDelete=(t,e)=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const n=this.dbInstance.transaction(t,"readwrite");e.forEach((t=>o(this,void 0,void 0,(function*(){yield n.store.delete(t)})))),yield n.done}catch(e){throw`Store ${t}, ${e.toString()}`}})),this.clearStore=t=>o(this,void 0,void 0,(function*(){try{if(!this.dbInstance)throw i;const e=this.dbInstance.transaction(t,"readwrite");yield e.store.clear(),yield e.done}catch(e){throw`Store ${t}, ${e.toString()}`}}))}checkForKeyPath(t,e){if(!t.autoIncrement||!t.keyPath)return e;if("string"!=typeof t.keyPath)return e;const n=t.keyPath;return e[n]||delete e[n],e}static upgradeDatabase(t,e,n,o){if(n&&n>e&&o.objectStores)for(var r of o.objectStores)t.objectStoreNames.contains(r.name)||this.addNewStore(t,r)}static getKeyPath(t){if(t){var e=t.split(",");return e.length>1?e:t}}static addNewStore(t,e){var n;try{const r=t.createObjectStore(e.name,{keyPath:this.getKeyPath(e.keyPath),autoIncrement:e.autoIncrement});for(var o of e.indexes)try{r.createIndex(o.name,null!==(n=this.getKeyPath(o.keyPath))&&void 0!==n?n:o.name,{multiEntry:o.multiEntry,unique:o.unique})}catch(t){throw`index ${o.name}, ${t.toString()}`}}catch(t){throw`store ${e.name}, ${t.toString()}`}}}e.IndexedDbManager=s}},e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(282)})();